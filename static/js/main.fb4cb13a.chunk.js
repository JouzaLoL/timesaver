(this.webpackJsonptimesaver=this.webpackJsonptimesaver||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(5),r=a.n(s),o=a(1),c=a(2),l=a(9),d=a(6),u=a(3),m=a(10),g=a(7),v=a.n(g),h=a(8);function f(e){var t,a,n;return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:"hover:bg-gray-800 hover:cursor-pointer\n\t\t\t\t\t\t\t bg-gray-700 px-3 py-2 rounded leading-normal ".concat(e.checked?"hover:bg-green-400 bg-green-300 text-green-800":""),htmlFor:null===(t=e.name)||void 0===t?void 0:t.toLowerCase()},"".concat(e.checked?"\u2705 ":e.icon).concat(e.name)),i.a.createElement("input",Object.assign({id:null===(a=e.name)||void 0===a?void 0:a.toLowerCase(),name:null===(n=e.name)||void 0===n?void 0:n.toLowerCase(),className:"hidden",type:"file"},e)))}var p=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).videoRef=void 0,a.state={videoName:null,videoSrc:"",subtitlesSrc:"",nonDialogueSpeed:1.5,dialogueSpeed:1,totalLength:0,dialogueLength:0,cues:[]},a.videoRef=Object(n.createRef)(),a.getSavedTime=a.getSavedTime.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onSubtitlesAdded",value:function(){var e=this;setTimeout((function(){var t,a,n=Array.from(null!==(t=null===(a=e.videoRef.current)||void 0===a?void 0:a.textTracks[0].cues)&&void 0!==t?t:[]),i=v.a.sum(n.map((function(e){return e.endTime-e.startTime})));e.setState({dialogueLength:i,cues:n})}),500)}},{key:"onLoadedMetadata",value:function(e){this.setState({totalLength:e.currentTarget.duration}),e.currentTarget.textTracks.onaddtrack=this.onSubtitlesAdded.bind(this)}},{key:"getSavedTime",value:function(){var e=(this.state.totalLength-this.state.dialogueLength)/this.state.nonDialogueSpeed,t=this.state.dialogueLength/this.state.dialogueSpeed+e;return this.state.totalLength-t}},{key:"render",value:function(){var e,t=this;return i.a.createElement("div",{className:"h-screen flex flex-col justify-between"},i.a.createElement("nav",{className:"text-gray-200 flex items-center justify-between p-5"},i.a.createElement("h1",{className:"text-gray-100 text-2xl overflow-hidden w-1/3"},null!==(e=this.state.videoName)&&void 0!==e?e:"Timesaver"),i.a.createElement("div",{className:"w-1/3 flex justify-center items-center"},i.a.createElement("span",{className:"mr-5"},i.a.createElement(f,{name:"Media",icon:"\u25b6 ",checked:Boolean(this.state.videoName),accept:"video/*",onChange:function(e){e.target.files&&t.setState({videoName:e.target.files[0].name,videoSrc:URL.createObjectURL(e.target.files[0])})}})),i.a.createElement(f,{name:"Subtitles",icon:"\ud83d\udcc4 ",checked:Boolean(this.state.subtitlesSrc),accept:"text/srt .srt",onChange:function(e){e.target.files&&new h.a(e.target.files[0]).getURL().then((function(e){t.setState({subtitlesSrc:e})})).catch((function(e){console.error(e)}))}})),i.a.createElement("div",{className:"flex items-center w-1/3 justify-end"},i.a.createElement("div",null,"Saved time:"," ",(this.getSavedTime()/this.state.totalLength*100).toFixed(2),"% ~"," ",Math.round(this.getSavedTime()/60)," minutes"),i.a.createElement("div",{className:"flex flex-col items-center justify-center mr-5"},i.a.createElement("div",null,i.a.createElement("span",{className:"text-gray-400 text-sm mr-1"},"Dialogue speed"),i.a.createElement("span",{className:"text-xl font-semibold"},this.state.dialogueSpeed.toFixed(1))),i.a.createElement("input",{type:"range",value:this.state.dialogueSpeed,step:.1,min:1,max:5,onChange:function(e){t.setState({dialogueSpeed:Number(e.target.value)})}})),i.a.createElement("div",{className:"flex flex-col items-center justify-center mr-5"},i.a.createElement("div",null,i.a.createElement("span",{className:"text-gray-400 text-sm mr-1"},"Non-dialogue speed"),i.a.createElement("span",{className:"text-xl font-semibold"},this.state.nonDialogueSpeed.toFixed(1))),i.a.createElement("input",{type:"range",value:this.state.nonDialogueSpeed,step:.1,min:1,max:5,onChange:function(e){t.setState({nonDialogueSpeed:Number(e.target.value)})}})))),i.a.createElement("main",{className:"text-gray-100 flex flex-col justify-center items-center"},this.state.videoSrc?i.a.createElement("div",{className:"rounded p-5 overflow-hidden"},i.a.createElement("video",{ref:this.videoRef,controls:!0,src:this.state.videoSrc,onTimeUpdate:function(e){var a=t.state.cues.find((function(t){return t.startTime-1<=e.currentTarget.currentTime&&t.endTime>=e.currentTarget.currentTime+1}));e.currentTarget.playbackRate=a?t.state.dialogueSpeed:t.state.nonDialogueSpeed},onLoadedMetadata:this.onLoadedMetadata.bind(this)},Boolean(this.state.subtitlesSrc)&&i.a.createElement("track",{label:"Subtitles",kind:"subtitles",srcLang:"en",src:this.state.subtitlesSrc,default:!0}))):i.a.createElement("span",{className:"my-5"},"Add your media using the button above")),i.a.createElement("div",{className:"text-center text-gray-600 text-sm py-2"},"\xa9 Josef Vacek"))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(18),a(19);r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.fb4cb13a.chunk.js.map